{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block title %} Yellow Banyan - Home {% endblock %}
{% block content %}
<main>
   <section class="mt-8">
      <div class="container">
         <div class="hero-slider">
            <!-- Slider Start -->
            {% for c in carousels %}
            <div style="
       background: url('/media/{{ c.image }}') no-repeat center center / cover;
       border-radius: 0.5rem;">
   <div class="ps-lg-12 py-lg-16 col-xxl-5 col-md-7 py-14 px-8 text-xs-center">
                  {% if c.offer_text %}
                  <span class="badge text-bg-warning">{{ c.offer_text }}</span>
                  {% endif %}
                  <h2 class="display-5 fw-bold mt-4"
    style="color: {{ c.title_color }};">
   {{ c.title }}
</h2>

<p class="lead"
   style="color: {{ c.description_color }};">
   {{ c.description }}
</p>
                  {% if c.page_link %}
                  <a href="{{ c.page_link }}" class="btn btn-dark mt-3">
                           Shop Now
                           <i class="feather-icon icon-arrow-right ms-1"></i>
                        </a>
                  {% endif %}
               </div>
            </div>
            {% endfor %}
            <!-- Slider End -->
         </div>
      </div>
   </section>

   <!-- Category Section Start-->
   <section class="mb-lg-10 mt-lg-14 my-8">
      <div class="container">
         <div class="row">
            <div class="col-12 mb-6">
               <h3 class="mb-0">Categories</h3>
            </div>
         </div>
         <div class="category-slider">
            {% for category in first_10_categories %}
            <!-- Categoty Repeat Start -->
            <div class="item h-100">
   <a href="{% url 'category-products' category.id %}" class="text-decoration-none text-inherit h-100">
      <div class="card card-product h-100 mb-lg-4">
         <div class="card-body d-flex flex-column align-items-center justify-content-between text-center py-4">

            <!-- Image Wrapper -->
            <div class="d-flex align-items-center justify-content-center" style="height:120px;">
               <img src="/media/{{ category.image }}"
                    alt="{{ category.name }}"
                    class="img-fluid"
                    style="max-height:100%; max-width:100%;" />
            </div>

            <!-- Category Name -->
            <div class="text-truncate mt-3 w-100"
     title="{{ category.name }}"
     data-bs-toggle="tooltip"
     data-bs-placement="top">
   {{ category.name }}
</div>


         </div>
      </div>
   </a>
</div>

            {% endfor %}
            <!-- Category Repeat End -->
         </div>
         {% if categories|length > 10 %}
         <div class="text-center mt-4">
            <a href="{% url 'user-categories' %}" class="btn btn-primary px-4">View All Categories</a>
         </div>
         {% endif %}
      </div>
   </section>
   <!-- Category Section End-->


         <!-- section category -->
         <section class="my-lg-14 my-8">
            <div class="container">
               <div class="row align-items-center mb-6">
                  <div class="col-10">
                     <div>
                        <!-- heading    -->
                        <h3 class="align-items-center d-flex mb-0 h4">
                           <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="feather feather-layers text-primary">
                              <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                              <polyline points="2 17 12 22 22 17"></polyline>
                              <polyline points="2 12 12 17 22 12"></polyline>
                           </svg>
                           <span class="ms-3">Shop by Our Brands</span>
                        </h3>
                     </div>
                  </div>
                  <div class="col-2">
                     <div class="slider-arrow slider-8-columns-arrow" id="slider-8-columns-arrows"></div>
                  </div>
                  {% for group in brands|slice:":12"|unordered_list %}
                  {% endfor %}
               </div>
               <div class="row g-6">
                  <div class="col-12">
                     <div class="position-relative">
                        <div class="slider-8-columns" id="slider-8-columns">
                           {% for brand in brands %}
                           <!-- item -->
                           <div class="item">
                              <!-- item -->
                              <a href="{% url 'brand-products' brand.id %}" class="text-decoration-none text-inherit">
                                 <!-- card -->
                                 <div class="card h-100 d-flex flex-column align-items-center justify-content-between p-4">
                                    <div class="d-flex align-items-center justify-content-center mb-3" style="height: 100px;">
                                       <img src="/media/{{ brand.image }}" class="img-fluid" style="max-height: 80px;">
                                    </div>
                                    <div class="text-center fw-semibold text-truncate w-100 px-1"
                                       title="{{ brand.name }}"
                                       data-bs-toggle="tooltip"
                                       data-bs-placement="top"
                                       style="max-width: 130px; margin: 0 auto;">
                                          {{ brand.name }}
                                    </div>
                                 </div>
                              </a>
                           </div> 
                           {% endfor %}
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </section>

   <!-- Popular Products Start-->
<section class="my-lg-14 my-8">
  <div class="container">
    <div class="row align-items-center mb-4">
      <div class="col-md-8">
        <h3 class="mb-0">Popular Products</h3>
      </div>
      <div class="col-md-4 text-end">
        <a href="{% url 'shop-all' %}" class="btn btn-outline-primary btn-sm">
          View All Products
        </a>
      </div>
    </div>

    <div class="row g-4 row-cols-lg-4 row-cols-md-3 row-cols-2">
      {% for product in most_viewed %}
      <div class="col">
        <div class="card card-product">
          <div class="card-body">
            <div class="text-center position-relative">
              <a href="{% url 'view-product' product.id %}">
                <img src="/media/{{ product.main_image }}" alt="{{ product.title }}" class="mb-3 img-fluid" style="height: 200px; object-fit: cover;">
              </a>
            </div>
            <h2 class="fs-6">
              <a href="{% url 'view-product' product.id %}" class="text-inherit text-decoration-none">
                {{ product.title }}
              </a>
            </h2>
            <div class="d-flex justify-content-between align-items-center mt-2">
              <div>
                <span class="text-dark">â‚¹{{ product.sale_price|default:product.price }}</span>
                {% if product.sale_price and product.sale_price != product.price %}
                <span class="text-muted text-decoration-line-through">â‚¹{{ product.price }}</span>
                <small class="text-danger fw-semibold">{{ product.price|discount_percent:product.sale_price }}% Off</small>
                {% endif %}
              </div>
              <a href="{% url 'view-product' product.id %}" class="btn btn-sm btn-primary">
                <i class="feather-icon icon-shopping-bag me-1"></i> View
              </a>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No products found.</p>
      {% endfor %}
    </div>
  </div>
</section>

   <!-- Popular Products End-->

   <section class="my-lg-14 my-8">
      <div class="container">

         <!-- <div class="row">
            <div class="col-md-6 col-lg-3">
               <div class="mb-8 mb-xl-0">
                  <div class="mb-6"><img src="" alt="" /></div>
                  <h3 class="h5 mb-3">10 minute grocery now</h3>
                  <p>Get your order delivered to your doorstep at the earliest from Yellow Banyan pickup stores near you.
                  </p>
               </div>
            </div>
         </div> -->
      </div>
   </section>
</main>

<!-- Modal -->
<div class="modal fade" id="quickViewModal" tabindex="-1" aria-hidden="true">
   <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
         <div class="modal-body p-8">
            <div class="position-absolute top-0 end-0 me-3 mt-3">
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="row">
               <div class="col-lg-6">
                  <!-- img slide -->
                  <div class="product productModal" id="productModal">
                     <div class="zoom" onmousemove="zoom(event)"
                        style="background-image: url(assets/images/products/product-single-img-1.jpg)">
                        <!-- img -->
                        <img src="" alt="" />
                     </div>
                     <div>
                        <div class="zoom" onmousemove="zoom(event)"
                           style="background-image: url()">
                           <!-- img -->
                           <img src="" alt="" />
                        </div>
                     </div>
                     <div>
                        <div class="zoom" onmousemove="zoom(event)"
                           style="background-image: url()">
                           <!-- img -->
                           <img src="" alt="" />
                        </div>
                     </div>
                     <div>
                        <div class="zoom" onmousemove="zoom(event)"
                           style="background-image: url()">
                           <!-- img -->
                           <img src="" alt="" />
                        </div>
                     </div>
                  </div>
                  <!-- product tools -->
                  <div class="product-tools">
                     <div class="thumbnails row g-3" id="productModalThumbnails">
                        <div class="col-3" class="tns-nav-active">
                           <div class="thumbnails-img">
                              <!-- img -->
                              <img src="" alt="" />
                           </div>
                        </div>
                        <div class="col-3">
                           <div class="thumbnails-img">
                              <!-- img -->
                              <img src="" alt="" />
                           </div>
                        </div>
                        <div class="col-3">
                           <div class="thumbnails-img">
                              <!-- img -->
                              <img src="" alt="" />
                           </div>
                        </div>
                        <div class="col-3">
                           <div class="thumbnails-img">
                              <!-- img -->
                              <img src="" alt="" />
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-lg-6">
                  <div class="ps-lg-8 mt-6 mt-lg-0">
                     <a href="#!" class="mb-4 d-block">Bakery Biscuits</a>
                     <h2 class="mb-1 h1">Napolitanke Ljesnjak</h2>
                     <div class="mb-4">
                        <small class="text-warning">
                           <i class="bi bi-star-fill"></i>
                           <i class="bi bi-star-fill"></i>
                           <i class="bi bi-star-fill"></i>
                           <i class="bi bi-star-fill"></i>
                           <i class="bi bi-star-half"></i>
                        </small>
                        <a href="#" class="ms-2">(30 reviews)</a>
                     </div>
                     <div class="fs-4">
                        <span class="fw-bold text-dark">$32</span>
                        <span class="text-decoration-line-through text-muted">$35</span>
                        <span><small class="fs-6 ms-2 text-danger">26% Off</small></span>
                     </div>
                     <hr class="my-6" />
                     <div class="mb-4">
                        <button type="button" class="btn btn-outline-secondary">250g</button>
                        <button type="button" class="btn btn-outline-secondary">500g</button>
                        <button type="button" class="btn btn-outline-secondary">1kg</button>
                     </div>
                     <div>
                        <!-- input -->
                        <!-- input -->
                        <div class="input-group input-spinner">
                           <input type="button" value="-" class="button-minus btn btn-sm" data-field="quantity" />
                           <input type="number" step="1" max="10" value="1" name="quantity"
                              class="quantity-field form-control-sm form-input" />
                           <input type="button" value="+" class="button-plus btn btn-sm" data-field="quantity" />
                        </div>
                     </div>
                     <div class="mt-3 row justify-content-start g-2 align-items-center">
                        <div class="col-lg-4 col-md-5 col-6 d-grid">
                           <!-- button -->
                           <!-- btn -->
                           <button type="button" class="btn btn-primary">
                              <i class="feather-icon icon-shopping-bag me-2"></i>
                              Add to cart
                           </button>
                        </div>
                        <div class="col-md-4 col-5">
                           <!-- btn -->
                           <a class="btn btn-light" href="#" data-bs-toggle="tooltip" data-bs-html="true"
                              aria-label="Compare"><i class="bi bi-arrow-left-right"></i></a>
                           <a class="btn btn-light" href="#!" data-bs-toggle="tooltip" data-bs-html="true"
                              aria-label="Wishlist"><i class="feather-icon icon-heart"></i></a>
                        </div>
                     </div>
                     <hr class="my-6" />
                     <div>
                        <table class="table table-borderless">
                           <tbody>
                              <tr>
                                 <td>Product Code:</td>
                                 <td>FBB00255</td>
                              </tr>
                              <tr>
                                 <td>Availability:</td>
                                 <td>In Stock</td>
                              </tr>
                              <tr>
                                 <td>Type:</td>
                                 <td>Fruits</td>
                              </tr>
                              <tr>
                                 <td>Shipping:</td>
                                 <td>
                                    <small>
                                       01 day shipping.
                                       <span class="text-muted">( Free pickup today)</span>
                                    </small>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<style>
/* ðŸ”µ Brand Logo Round Shape */
.brand-card {
  border-radius: 50%;
  overflow: hidden;
  width: 120px;
  height: 120px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  border: 3px solid #f1f1f1;
  transition: all 0.3s ease;
}

.brand-card:hover {
  transform: scale(1.05);
  border-color: #000;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.brand-logo {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

</style>

<script>
  $(document).ready(function(){
    $('.hero-slider').slick({
      autoplay: true,
      autoplaySpeed: 3000,
      dots: true,
      arrows: true,
      fade: true,
      speed: 600,
      cssEase: 'linear'
    });
  });
</script>
 
<script>
document.addEventListener("DOMContentLoaded", function () {
  const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.map(el => new bootstrap.Tooltip(el));
});
</script>

{% endblock %}